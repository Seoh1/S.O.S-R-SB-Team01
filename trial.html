<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Form</title>


</head>

<script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>



<body>
  

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-database.js"></script>
    
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-analytics.js"></script>
        <!-- this is added by Eliza for the jQuery-->
        <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>


    

    
     <p> 
        <ol id="Business list">
            
        </ol>
    </p>  
    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyBRmNBPErjiQzclhKDNHC4DJ-NNTdZD6GU",
            authDomain: "team-universal-database.firebaseapp.com",
            databaseURL: "https://team-universal-database.firebaseio.com",
            projectId: "team-universal-database",
            storageBucket: "team-universal-database.appspot.com",
            messagingSenderId: "359143047818",
            appId: "1:359143047818:web:0db611886ddacafd6ba373",
            measurementId: "G-LJZVEVE4BC"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        database = firebase.database();

        //eliza's added parts- retrieving data from the firebase


        // var ref = database.ref("Business");
        // ref.on("value", gotData, errData);

        var ref= database.ref("Business").orderByKey();
        var submitResults = function(){
            var name_val = $("#name").val();
            var email_val  = $("#email").val();
            var number_val = $("#number").val();

            ref.push({
                "name": name_val,
                "email" :email_val,
                "number": number_val


            })
        };
        ref.limitToLast(1).on('child_added',function(childSnapshot){
            ref = childSnapshot.val();
            $("#name").html(ref.name_val)
            $("#email").html(ref.email_val)
            $("#number").html(ref.number_val)

            $("#link").attr("href, ref.link")




        });

        $(window).load(function(){
            $("#Biz form").submit(submitResults);
        })




        // ref.on("value",gotData, errData);

       
        // function gotData(data) {
        //     var businesses = data.val();
        //     var keys = Object.keys(businesses);

        //     for (var i =0; i < keys.length; i++){
        //         var k = keys[i];
        //         var name_val = businesses[k].Name;
        //         var email_val = businesses[k].Email;
        //         var number_val= businesses[k].Number;

        //         $("#name").append(name_val);
        //         $("#email").append(email_val);
        //         $("#number_val").append(number_val);

        //         $("#name").append("<p" + name_val + "</p><p> " + email_val + "</p><p> " + number_val + "</p<br>");


               
        //     }

        //     }

        // function errData(err){
        //     console.log("error!");
        //     console.log(err);
        // }


        

        // end of added stuff from ELIZA
        

        function writeData() {
            firebase.database().ref("Business").push({
        
               Name: document.getElementById("Biz Name").value,
               Address: document.getElementById("L1").value + " " + document.getElementById("L2").value,
               Email: document.getElementById("biz email").value,
               Number: document.getElementById("biz nums").value,
               Business_Type: document.getElementById("Biz Type").value

             
                
            });
        }
    </script>

    <form id = "Biz form">
        <div>
            <label for = "Biz Name"> Business Name</label> <!-- label for refers to an input id, specified in input. This is to highlight the corresponding textbox-->
            <input type = "text" name = "Business Name" id = "Biz Name" placeholder="Business Name" required>
        </div>
        <div>
            <label for = "L1"> Address Line 1 </label>
            <input name = "Address Line 1" id = "L1" placeholder="Busniess Address Line 1" required>
        </div>
        <div>
            <label for = "L2"> Address Line 2 (optional) </label>
            <input name = "Address Line 2" id = "L2" placeholder="Business Address Line 2">
        </div>
        <div>
            <label for = "biz email"> Email </label>
            <input type = "email" name = "Business Email" id = "biz email" required>
    
        </div>
        <div>
            <label for = "biz nums"> Business Number</label>
            <input type = "number" name = "Business Number" id = "biz nums" required>
        </div>
        <div>
            <label> Business Type 
                <select id = "Biz Type">
                <option value = "Resturant"> Resturant</option>
                <option value = "Barber"> Barber</option>
                <option value = "Bike"> Bike </option>
                <option value = "Boutique"> Boutique </option>
                <option value = "Coffee"> Coffee </option>
                <option value = "Florist"> Florist</option>

                </select>
            </label>
        </div>
        <div>
            <h1>
                Please check your business status
            </h1>
            <div>
                <label for = "mask"> Require Mask </label>
                <input type = "checkbox" name = "Mask" id = "mask">
            </div>
            <div>
                <label for = "delivery"> Delivery </label>
                <input type = "checkbox" name = "Delivery" id = "delivery" >
            </div>
            <div>
                <label for = "take out"> Take Out </label>
                <select>
                    <option value = "Crubside"> Curbside pick up </option>
                    <option value = "Pickup"> Returant pick up</option>
                </select>
            </div>
        </div>
        <button type = "reset"> Reset </button>
        <button onclick= "writeData()"> Submit </button>
    </form>
</body>
</html>